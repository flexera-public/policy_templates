<%- @tables.each do |table| -%>
  <%- if table[:content].any? -%>
<table data-meta="generated_by_<%= @danger_id %>">
  <tbody>
    <%- table[:content].each do |violation| -%>
    <tr>
      <td>:<%= table[:emoji] %>:</td>
      <td width="100%" data-sticky="<%= violation.sticky %>"><%= "<del>" if table[:resolved] %><%= violation.message %><%= "</del>" if table[:resolved] %></td>
    </tr>
    <%- end -%>
  </tbody>
</table>
  <%- end -%>
<%- end -%>

<%- @markdowns.each do |current| -%>
<%= current %>
<%# the previous line has to be aligned far to the left, otherwise markdown can break easily %>
<%- end -%>
<%# We need to add the generated_by_ to identify comments from danger. But with inlines %>
<%# it might be a little annoying, so we set on the table, but if we have markdown we add the footer anyway %>
<%- if @markdowns.count > 0 -%>
<p align="right" data-meta="generated_by_<%= @danger_id %>">
  Generated by :no_entry_sign: <a href="http://danger.systems/">Danger</a>
</p>
<%- end -%>
